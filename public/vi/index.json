[
{
	"uri": "//localhost:1313/vi/1-introduction/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "VPC Dual Stack Ngày càng có nhiều tổ chức áp dụng IPv6 trong môi trường của họ, do không gian IPv4 công cộng cạn kiệt, IPv4 riêng tư khan hiếm, đặc biệt là trong các mạng quy mô lớn và nhu cầu cung cấp dịch vụ khả dụng cho các máy khách chỉ sử dụng IPv6. Một bước trung gian trên con đường hỗ trợ đầy đủ IPv6 là thiết kế IPv4/IPv6 dual-stack, tận dụng cả hai phiên bản của giao thức IP song song. Amazon Elastic Container Registry (Amazon ECR) là một dịch vụ lưu trữ hình ảnh container (container image registry) được AWS quản lý, đảm bảo tính bảo mật, khả năng mở rộng và độ tin cậy cao. Amazon ECR hỗ trợ các kho lưu trữ riêng tư (private repositories) với quyền truy cập dựa trên tài nguyên, sử dụng AWS IAM. Nhờ đó, bạn có thể chỉ định người dùng hoặc các phiên bản Amazon EC2 cụ thể được phép truy cập vào kho lưu trữ và các hình ảnh container của bạn. Bạn có thể sử dụng công cụ dòng lệnh (CLI) ưa thích của mình để đẩy (push), kéo (pull) và quản lý các Docker image, image theo tiêu chuẩn Open Container Initiative (OCI), cũng như các đối tượng tương thích với OCI. Amazon Elastic Container Service (Amazon ECS) là một dịch vụ điều phối container được quản lý hoàn toàn, giúp bạn dễ dàng triển khai, quản lý và mở rộng các ứng dụng được đóng gói dưới dạng container. Là một dịch vụ được quản lý hoàn toàn, Amazon ECS tích hợp sẵn các cấu hình và thực tiễn vận hành tốt nhất từ AWS. Dịch vụ này được tích hợp với cả các công cụ của AWS như Amazon Elastic Container Registry, cũng như các công cụ của bên thứ ba như Docker. Sự tích hợp này giúp các nhóm phát triển tập trung vào việc xây dựng ứng dụng, thay vì phải lo lắng về môi trường vận hành. Bạn có thể chạy và mở rộng khối lượng công việc container của mình trên các vùng (Region) của AWS trong đám mây hoặc tại chỗ (on-premises) mà không cần phải quản lý mặt phức tạp của một mặt phẳng điều khiển (control plane). "
},
{
	"uri": "//localhost:1313/vi/3-push-image-to-ecr-and-run-ecs-cluster/3.1-push-image-to-ecr/",
	"title": "Push image lên ECR",
	"tags": [],
	"description": "",
	"content": "Tiến hành push 1 image từ máy local lên ECR để quản lý và lưu trữ\nTại AWS Management Console tìm Elastic Container Registry Tại thanh bên trái trong phần Private repositories chọn Repositories rồi chọn Create repositories Tại Create private repository Nhập Repositories name là fcj-my-repo Kéo xuống và ấn Create Push image từ local lên ECR Từ IDE như VS Code tiến hành AWS configure với IAM user đã tạo là ECR_admin ở trên Quay lại trang quản lý reposirories của ECR chọn vào repositories vừa tạo Chọn View push commands Thực hiện theo thứ tự các bước để login, build, gắn tag và push image lên ECR Sau khi hoàn tất việc push image lên ECR quay lại ECR repositories Copy URI của repositories vừa tạo để sử dụng trong việc khai báo ở bước tiếp theo\n"
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.2-create-vpc/2.2.1-vpc/",
	"title": "Tạo VPC",
	"tags": [],
	"description": "",
	"content": "Tạo VPC hỗ trợ dual-stack Tại AWS Management Console tìm VPC Chọn Create VPC Trong phần Create VPC Chọn VPC only Name tag điền my-dual-vpc IPv4 CIDR điền 10.0.0.0/16 IPv6 CIDR block chọn Amazon-provided IPv6 CIDR block Kéo xuống và chọn Create VPC "
},
{
	"uri": "//localhost:1313/vi/",
	"title": "Triển khai ứng dụng với ECS Fargate và VPC dual-stack",
	"tags": [],
	"description": "",
	"content": "Triển khai ứng dụng với ECS Fargate và VPC dual-stack Triển khai ứng dụng với cụm ECS sử dụng VPC hỗ trợ cả IPv4 và IPv6 và sử dụng ECR để lưu trữ images.\nSơ đồ tổng quát Nội dung chính Giới tthiệu Tạo tài nguyên Push image lên ECR và chạy cụm ECS Cấu hình Application Load Balancer Dọn dẹp tài nguyên "
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "Tạo các tài nguyên cần thiết Tạo các tài IAM user và IAM role để push các image từ local lên ECR và IAM role để chạy các task trong cụm ECS Tạo Security Group cho public subnet và private subnet Tạo VPC, subnet và các gateway Tạo IAM user và IAM role Tạo VPC "
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.1-create-iam-user-and-iam-role/",
	"title": "Tạo IAM user và IAM role",
	"tags": [],
	"description": "",
	"content": "Tạo IAM user Tạo user và cấp quyền để có thể push image từ máy local lên ECR\nĐăng nhập vào IAM Management Console Tại thanh bên trái chọn Users rồi chọn Create user Tại trang Specify user details Nhập User name: ECR_admin Ấn Next Tại trang Set permissions Trong phần Permissions options chọn Attach policies directly Trong phần Permissions policies điền AmazonEC2ContainerRegistryFullAccess sau đó tích chọn Sau đó ấn Next Tại trang Review and create Chọn Create User Quay lại IAM Management Console và chọn user vừa tạo Tạo access key Trong trang quản lý user chọn Security credentials Trong phần Access Key chọn Create access key Tại trang Access key best practices \u0026amp; alternatives trong phần Use case chọn Command Line Interface (CLI) Kéo xuống ấn tích trong phần Confirmation và ấn Next Chọn Create access key Tải Access Key Chọn Download .csv file hoặc có thể copy Access Key và Secret access key và lưu trữ trong các trình lưu trữ văn bản như Notepad Chọn Done Tạo IAM role Quay lại IAM Management Console Tại thanh bên trái chọn Role rồi chọn Create Role Tại trang Select trusted entity Trong phần Trusted entity type chọn AWS Service Kéo xuống trong phần Use case Nhập Elastic Container Service trong Service or use case Chọn Elastic Container Service Task và ấn Next Trong phần Add permissions Nhập AmazonECSTaskExecutionRolePolicy vào thanh tìm kiếm Tích chọn policy và ấn Next Trong phần Name, review, and create Tại ô Role name nhập ECS-TaksExecute Kéo xuống chọn Create Role "
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.2-create-vpc/2.2.2-subnets/",
	"title": "Tạo Subnets",
	"tags": [],
	"description": "",
	"content": "Tạo public subnet Tại VPC Dashboard chọn Subnets ở góc trái rồi chọn Create subnet Trong phần Create Subnet VPC ID chọn VPC vừa tạo Subnet name điền public-subnet-1a Availability Zone chọn us-east-1a IPv4 subnet CIDR block điền 10.0.0.0/24 IPv6 subnet CIDR block điền 2600:1f18:7004:7800::/64 Chọn Create Subnet Tương tự tạo public-subnet-1b Subnet name điền public-subnet-1b Availability Zone chọn us-east-1b IPv4 subnet CIDR block điền 10.0.1.0/24 IPv6 subnet CIDR block điền 2600:1f18:7004:7801::/64 Tạo private subnet Tại VPC Dashboard chọn Subnets ở góc trái rồi chọn Create subnet Trong phần Create Subnet VPC ID chọn VPC vừa tạo Subnet name điền private-subnet-1a Availability Zone chọn us-east-1a IPv4 subnet CIDR block điền 10.0.2.0/24 IPv6 subnet CIDR block điền 2600:1f18:7004:7802::/64 Chọn Create Subnet Tương tự tạo private-subnet-1b Subnet name điền privateprivate-subnet-1b Availability Zone chọn us-east-1b IPv4 subnet CIDR block điền 10.0.3.0/24 IPv6 subnet CIDR block điền 2600:1f18:7004:7803::/64 Nhằm mục đích triển khai Multi-AZ, trên mỗi AZ có 1 public và 1 private subnet, có thể sử dụng nhiều AZ khác nhau trong 1 region tùy theo nhu cầu và mục đích sử dụng\n"
},
{
	"uri": "//localhost:1313/vi/3-push-image-to-ecr-and-run-ecs-cluster/3.2-create-ecs-cluster/",
	"title": "Tạo và run task với ECS cluster",
	"tags": [],
	"description": "",
	"content": " Tại AWS Management Console tìm Elastic Container Service Tại thanh bên trái chọn Clusters chọn Create Cluster Trong phần Create cluster Nhập Cluster name là fcj-my-cluster Trong phần Infrastructure chọn AWS Fargate Kéo xuống và chọn Create Quay lại ECS Management Console tại thanh bên trái chọn Task definitions chọn Create new task definition Tại trang Create new task definition Trong phần Task definition configuration trong ô Task definition family điền my-task Trong phần Infrastructure requirements Launch type chọn AWS Fargate Task execution role chọn ECS-TaskExecute Trong phần Container Name nhập 2048 Image URI nhập 199464522308.dkr.ecr.us-east-1.amazonaws.com/fcj-my-repo Container port nhập 8080 Kéo xuống và ấn Create Quay lại ECS Management Console chọn Cluster chọn vào cluster đã tạo kéo xuống chọn Tasks và chọn Run new task Tại cửa sổ Run task Task definition family chọn my-task Desired tasks điền 3 Trong phần Compute options chọn Lauch type Trong phần Networking VPC chọn my-dual-vpc Subnets chọn private-subnet-1a và private-subnet-1b Security group chọn Use an existing security group và chọn Private-SG Public IP chọn Turn off Kéo xuống và chọn Create Quay lại ECS Management Console và đợi cho trạng thái các task là Running Chọn các task và lưu lại địa chỉ IP private của các task\n"
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.2-create-vpc/",
	"title": "Tạo VPC và các tài nguyên trong VPC",
	"tags": [],
	"description": "",
	"content": "Tạo VPC, subnet các gateway và cấu hình Route Table Tạo VPC Tạo các subnets Tạo các gateways Tạo Security Group Cấu hình Route Table "
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.2-create-vpc/2.2.3-gateways/",
	"title": "Tạo các gateways",
	"tags": [],
	"description": "",
	"content": "Internet gateways Tại VPC Dashboard chọn Internet gateways Name tag điền dual-vpc-igw Tại trang Internet gateways Chọn interet gateway vừa tạo Trong phần Action Chọn Attach to VPC Chọn VPC đã tạo rồi chọn Attach internet gateway NAT gateways Tại VPC Dashboard chọn Elastic IPs chọn Allocate Elastic IP address Tại trang Allocate Elastic IP address chọn Allocate Quay lại VPC Dashboard chọn NAT gateways rồi chọn Create NAT gateway Tại trang Create NAT gateways Name điền dual-vpc-ngw Subnet chọn public-subnet-1a Connectivity type chọn public Elastic IP allocation ID chọn IP vừa tạo Chọn Create NAT gateway Egress only internet gateways Tại VPC Dashboard chọn Egress only internet gateways chọn Create egress only internet gateways Tại trang Create egress only internet gateway Name điền dual-vpc-egw VPC chọn VPC đã tạo Chọn Create egress only internet gateway "
},
{
	"uri": "//localhost:1313/vi/3-push-image-to-ecr-and-run-ecs-cluster/",
	"title": "Tạo và run task với ECS cluster",
	"tags": [],
	"description": "",
	"content": "Tiến hành push image từ local lên ECR sau đó tạo cụm ECS và cấu hình các Task definition để chạy trên Fargate\nPush image từ local lên ECR Tạo ECS cluster và set up Task definition "
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.2-create-vpc/2.2.4-securitygroup/",
	"title": "Tạo các Security Group",
	"tags": [],
	"description": "",
	"content": "Tạo public Security Group Tại VPC Dashboard chọn Security Group chọn Create security group Tại trang Create security group Security group name điền Public-SG Description điền Allows HTTP and HTTPs VPC chọn VPC đã tạo Cấu hình Inbound rules Chọn Add rule Type HTTP Source Anywhere-IPv4 Type HTTP Source Anywhere-IPv6 Type HTTPS Source Anywhere-IPv4 Type HTTPS Source Anywhere-IPv6 Kéo xuống và chọn Create security groups Tạo private Security Group Tại VPC Dashboard chọn Security Group chọn Create security group Tại trang Create security group Security group name điền Private-SG Description điền Allows TCP port 8080 VPC chọn VPC đã tạo Cấu hình Inbound rules Chọn Add rule Type Custom TCP Port range 8080 Source Custom chọn Secutiry group chọn Public-SG đã tạo ở trên Kéo xuống và chọn Create security group "
},
{
	"uri": "//localhost:1313/vi/4-setup-application-load-balancer/",
	"title": "Triển khai Load Balancer",
	"tags": [],
	"description": "",
	"content": "Cấu hình Target Group Tại AWS Management Console EC2 Tại thanh bên trái trong phần Load Balancing chọn Target Groups rồi chọn Create target group Tại trang Specify group details Trong phần Choose a target type chọn IP addresses Target group name điền ECS-TaskRunner Protocol chọn HTTP và Port điền 8080 VPC chọn my-dual-vpc Kéo xuống và ấn Next Tại trang Register targets Step 1: Choose a network chọn my-dual-vpc Step 2: Specify IPs and define ports Điền 10.0.2.40 Chọn Add IPv4 address rồi điền 10.0.3.32 Chọn Add IPv4 address rồi điền 10.0.3.190 Chọn Include as pending below Kéo xuống và chọn Create target group Cấu hình Application Load Balancer Tại EC2 Management Console chọn Load balancers rồi chọn Create Load Balancer Load balancer types chọn Application Load Balancer và ấn Create Tại trang Basic configuration Basic configuration Load balancer name điền fcj-my-alb Scheme chọn Internet-facing Load balancer IP address type chọn Dualstack Network mapping VPC chọn my-dual-vpc Availability Zones and subnets chọn 2 AZ us-east-1a và public-subnet-1a us-east-1b và public-subnet-1b Security groups chọn Public-SG Listeners and routing Protocol chọn HTTP Port điền 80 Default action chọn Target group vừa tạo ECS-TaskRunner Kéo xuống và chọn Create load balancer Đợi cho trạng thái của Application Load Balancer chuyển thành Active Truy cập ứng dụng thông qua DNS name của AWS Dùng nslookup dns name của AWS trả về hai loại địa chỉ là IPv4 và IPv6 "
},
{
	"uri": "//localhost:1313/vi/2-setup-resource/2.2-create-vpc/2.2.5-routetable/",
	"title": "Cấu hình Route Table",
	"tags": [],
	"description": "",
	"content": "Public Route Table Tại VPC Dashboard chọn Route table chọn Create route table Tại trang Create route table Name điền public-route VPC chọn VPC đã tạo Chọn Create route table\nChọn route table vừa tạo chọn Edit route Chọn Add route Tạo 2 route để route tới Internet Gateway và Egress only internet gateway Destionation 0.0.0.0/24 Target Internet Gateway - igw-09881de6e00fff886 Destination ::/0 Target Egress Only Internet Gateway - eigw-0cfa00385fe41e2a3 Chọn Save change để lưu lại Chọn public-route vừa tạo chọn Action chọn Edit subnet associations Tích chọn public-subnet-1a và public-subnet-1b rồi chọn Save Associations Private Route Table Tại VPC Dashboard chọn Route table chọn Create route table Tại trang Create route table Name điền private-route VPC chọn VPC đã tạo Chọn Create route table Chọn route table vừa tạo chọn Edit route Chọn route table vừa tạo chọn Edit route Tạo route để đi tới NAT gateway Chọn Add route Destionation 0.0.0.0/0 Target NAT Gateway - nat-00f40babba2f71fa4 Chọn Save change để lưu lại Chọn public-route vừa tạo chọn Action chọn Edit subnet associations Tích chọn public-subnet-1a và public-subnet-1b rồi chọn Save Associations "
},
{
	"uri": "//localhost:1313/vi/5-cleanupresource/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "Dọn dẹp tài nguyên\n1. Xóa Application Load Balancer và Target group Xóa Application Load Balancer Truy cập EC2 Management Console Tại thanh bên trái chọn Load Balancers Tích chọn vào fcj-my-alb Chọn Action rồi chọn Delete load balancer Điền confirm rồi chọn Delete Xóa Target Group Truy cập EC2 Management Console Tại thanh bên trái chọn Target Groups Tích chọn vào ECS-TaskRunner Chọn Action rồi chọn Delete Chọn Delete 2. Xóa ECS Cluster Xóa Cluster Truy cập ECS Management Console Chọn Clusters rồi chọn fcj-my-cluster Vào Tasks chọn Stop rồi chọn Stop all Nhập stop all tasks rồi chọn Stop all đợi đến khi staus của các task là Stopped Chọn Delete Cluster Nhập delete fcj-my-cluster rồi chọn Delete Xóa Task Definitions Truy cập ECS Management Console Chọn Task definitions rồi chọn my-task Chọn phần Task definition: revision tích chọn tất cả Chọn Acion chọn Deregister chọn Deregister 3. Xóa ECR repositories Xóa ECR repositories Truy cập ECR Management Console Chọn Repositories trong Private registry Tích chọn fcj-my-repo chọn Delete rồi chọn Delete 4. Xóa VPC và các tài nguyên trong VPC Xóa NAT gateways Truy cập VPC Management Console Tại thanh điều hướng bên trái chọn NAT gateways Chọn NAT gateways liên quan tới bài dual-vpc-ngw Chọn Action chọn Delete NAT gateway Nhập delete rồi chọn Delele Xóa Internet gateways Truy cập VPC Management Console Tại thanh điều hướng bên trái chọn Internet gateways Chọn Internet gateways liên quan tới bài dual-vpc-igw Chọn Action chọn Detach from VPC rồi chọn Detach internet gateway Chọn Action chọn Delete internet gateway Nhập delete chọn Delete internet gateway Xóa Egress only internet gateways Truy cập VPC Management Console Tại thanh điều hướng bên trái chọn Egress-only internet gateways Chọn Egress only internet gateways liên quan tới bài dual-vpc-egw Chọn Action chọn Delete egress only internet gateway Nhập delete chọn Delete egress only internet gateway Xóa VPC Truy cập VPC Management Console Tại thanh điều hướng bên trái chọn Your VPCs Chọn VPC liên quan đến bài my-dual-vpc Chọn Action chọn Delete VPC Nhập delete chọn Delete Khi xóa VPC, AWS sẽ tự động xóa các tài nguyên liên quan như: Subnets, Route Table, Security Group và Internet Gateways\n"
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]